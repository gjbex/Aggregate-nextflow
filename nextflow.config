lineage.enabled = true
workflow.output.mode = 'copy'

apptainer {
    enabled = true
    runOptions = "-B ${launchDir} -B ${projectDir}"
    autoMounts = true
}

process {
    withLabel: 'data_processing_container' {
        container = "${launchDir}/images/data_processing.sif"
    }
}

profiles {
    standard {}
    cluster {
        apptainer {
            cacheDir = "/scratch/leuven/301/vsc30140/apptainer_cache"
        }
        process {
            executor = 'slurm'
            clusterOptions  = '--cluster=wice --account=lpt2_sysadmin'
            withName: 'BuildImage' {
                cpus = 4
                time = '30min'
            }
            withLabel: 'data_processing_container' {
                cpus = 1
                time = '5min'
                container = "${launchDir}/images/data_processing.sif"
            }
        }
    }
}
